(()=>{"use strict";var e=function(){function e(){this._ctcId="clickToCallHeaderEvent",this._ctcClassPrepend="callNowClass",this._isTouch=!1,this.ClickToCallTagging()}return e.prototype.ClickToCallTagging=function(){var e,t=this,n=null,i=document.querySelector("#"+this._ctcId);i&&(null===(e=i.querySelector("."+this._ctcClassPrepend))||void 0===e||e.innerHTML,n=i.dataset.department,this.BuildEventListeners(i,n)),Array.from(document.querySelectorAll("li")).filter((function(e){return e.classList.value.includes("vdp-phone-")})).forEach((function(e){var i=e.innerText||e.textContent;if(""!==i&&" "!==i){var a=e.querySelector("a");a.innerHTML,n=a.previousSibling.textContent,t.BuildEventListeners(a,n)}}));var a=document.querySelector("#phone-details");a&&a.querySelector("table")?Array.from(a.querySelectorAll("a")).forEach((function(e){var i,a;e.innerHTML,n=null===(a=null===(i=e.closest("tr"))||void 0===i?void 0:i.querySelector(".phonelabel"))||void 0===a?void 0:a.innerHTML,t.BuildEventListeners(e,n)})):a&&Array.from(a.querySelectorAll("a")).forEach((function(e){var i;e.innerHTML,n=null===(i=e.parentElement.querySelector("strong"))||void 0===i?void 0:i.innerHTML,t.BuildEventListeners(e,n)})),Array.from(document.querySelectorAll("span")).filter((function(e){return e.classList.value.includes(t._ctcClassPrepend)&&"A"===e.parentElement.tagName&&e.parentElement.id!==t._ctcId})).forEach((function(e){var i;e.innerHTML,n=null===(i=e.parentElement.previousElementSibling)||void 0===i?void 0:i.innerHTML,t.BuildEventListeners(e.parentElement,n)}))},e.prototype.BuildEventListeners=function(e,t){var n=this;e.addEventListener("click",(function(){t&&n.BuildTaggingScriptClickToCall(t)}))},e.prototype.BuildTaggingScriptClickToCall=function(e){var t={event:"phone_"+e.toLocaleLowerCase()};window.dataLayer.push(t)},e}(),t=function(){function t(){this.isApexOpen=!1,this.initialize()}return t.prototype.initialize=function(){var t=this;this.dynamicClickEventListener=function(e){return t.handleDynamicHandlers(e)},new e,this.clickEvents()},t.prototype.clickEvents=function(){var e=this,t=document.querySelectorAll("[data-tagging-event]");t&&t.forEach((function(t){t.addEventListener("click",(function(){e.parseTaggingEvents(t)}))}))},t.prototype.parseTaggingEvents=function(e){var t,n,i=null;if("exit"===(null===(t=e.innerText)||void 0===t?void 0:t.toLowerCase().trim()))this.isApexOpen=!1,i="exit",document.body.removeEventListener("click",this.dynamicClickEventListener,!0);else if(!(i=null===(n=e.dataset)||void 0===n?void 0:n.taggingEvent)){var a=e.closest("[data-tagging-event]");a&&(i=a.dataset.taggingEvent.toLowerCase())}if(i)if(this.isApexOpen)this.updateDataLayer({event:"digital_retail_step",step_name:""+i});else switch(i){case"srp":case"vdp":case"click":this.handleVehiclePageTaggingEvents(e);break;default:return}else console.warn("Tagging event not supported for Incubeta.")},t.prototype.handleVehiclePageTaggingEvents=function(e){var t;if(null===(t=e.dataset)||void 0===t?void 0:t.taggingProducttype){var n=e.dataset.taggingProducttype.toLowerCase();switch(n){case"apex widget launch":this.isApexOpen=!0,document.body.removeEventListener("click",this.dynamicClickEventListener,!0),document.body.addEventListener("click",this.dynamicClickEventListener,!0),this.updateDataLayer({event:"digital_retail_step",step_name:"start"});break;case"pricestack":this.handlePriceStackTaggingEvents(e.dataset);break;default:console.warn('Tagging for product "'+n+'" is not supported.')}}},t.prototype.handlePriceStackTaggingEvents=function(e){var t,n,i=null===(t=e.taggingValue)||void 0===t?void 0:t.toLowerCase();if("buy online"===i){var a=null!==(n=e.taggingAdditionalData)&&void 0!==n?n:"";this.updateDataLayer({event:"buy_online_"+a+"_vehicle"})}else console.warn("Tagging for "+i+" not implemented.")},t.prototype.handleDynamicHandlers=function(e){var t=e.target;this.parseTaggingEvents(t)},t.prototype.updateDataLayer=function(e){window.dataLayer=window.dataLayer||[],window.dataLayer.push(e)},t}();DoUtility.SelfInstantiateOnLoad(t)})();
//# sourceMappingURL=incubetaBundle.js.map
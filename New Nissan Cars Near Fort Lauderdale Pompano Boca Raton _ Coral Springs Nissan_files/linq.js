"use strict";dealeron.runtime.define([],function(){function l(t,e,n){var r=new u,o=c;this.current=r.current,this.moveNext=function(){try{switch(o){case c:o=a,t();case a:return!!e.apply(r)||(this.dispose(),!1);case f:return!1}}catch(t){throw this.dispose(),t}},this.dispose=function(){if(o==a)try{n()}finally{o=f}}}function u(){var e=null;this.current=function(){return e},this.yieldReturn=function(t){return e=t,!0},this.yieldBreak=function(){return!1}}function h(t){this.getEnumerator=t}var s={Identity:function(t){return t},True:function(){return!0},Blank:function(){}},t=typeof!0,o="number",i="string",e=typeof{},r="undefined",p="function",y={createLambda:function(t){return t||s.Identity},isIEnumerable:function(t){if(typeof Enumerator!==r)try{return new Enumerator(t),!0}catch(t){}return!1},defineProperty:null!=Object.defineProperties?function(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n})}:function(t,e,n){t[e]=n},compare:function(t,e){return t===e?0:e<t?1:-1},dispose:function(t){null!=t&&t.dispose()}},c=0,a=1,f=2,n=((h.Utils={}).createLambda=function(t){return y.createLambda(t)},h.Utils.createEnumerable=function(t){return new h(t)},h.Utils.createEnumerator=function(t,e,n){return new l(t,e,n)},h.Utils.extendTo=function(t){var e,n,r=t.prototype;for(n in t===Array?(e=v.prototype,y.defineProperty(r,"getSource",function(){return this})):(e=h.prototype,y.defineProperty(r,"getEnumerator",function(){return h.from(this).getEnumerator()})),e){var o=e[n];r[n]==o||null!=r[n]&&r[n+="ByLinq"]==o||o instanceof Function&&y.defineProperty(r,n,o)}},h.choice=function(){var t=arguments;return new h(function(){return new l(function(){t=t[0]instanceof Array?t[0]:null!=t[0].getEnumerator?t[0].toArray():t},function(){return this.yieldReturn(t[Math.floor(Math.random()*t.length)])},s.Blank)})},h.cycle=function(){var e=arguments;return new h(function(){var t=0;return new l(function(){e=e[0]instanceof Array?e[0]:null!=e[0].getEnumerator?e[0].toArray():e},function(){return t>=e.length&&(t=0),this.yieldReturn(e[t++])},s.Blank)})},h.empty=function(){return new h(function(){return new l(s.Blank,function(){return!1},s.Blank)})},h.from=function(r){if(null==r)return h.empty();if(r instanceof h)return r;if(typeof r==o||typeof r==t)return h.repeat(r,1);if(typeof r==i)return new h(function(){var t=0;return new l(s.Blank,function(){return t<r.length&&this.yieldReturn(r.charAt(t++))},s.Blank)});if(typeof r!=p){if(typeof r.length==o)return new v(r);if(!(r instanceof Object)&&y.isIEnumerable(r))return new h(function(){var t,e=!0;return new l(function(){t=new Enumerator(r)},function(){return e?e=!1:t.moveNext(),!t.atEnd()&&this.yieldReturn(t.item())},s.Blank)});if(typeof Windows===e&&typeof r.first===p)return new h(function(){var t,e=!0;return new l(function(){t=r.first()},function(){return e?e=!1:t.moveNext(),t.hasCurrent?this.yieldReturn(t.current):this.yieldBreak()},s.Blank)})}return new h(function(){var n=[],t=0;return new l(function(){for(var t in r){var e=r[t];e instanceof Function||!Object.prototype.hasOwnProperty.call(r,t)||n.push({key:t,value:e})}},function(){return t<n.length&&this.yieldReturn(n[t++])},s.Blank)})},h.make=function(t){return h.repeat(t,1)},h.matches=function(n,t,r){return null==r&&(r=""),t instanceof RegExp&&(r=(r+=t.ignoreCase?"i":"")+(t.multiline?"m":""),t=t.source),-1===r.indexOf("g")&&(r+="g"),new h(function(){var e;return new l(function(){e=new RegExp(t,r)},function(){var t=e.exec(n);return!!t&&this.yieldReturn(t)},s.Blank)})},h.range=function(n,r,o){return null==o&&(o=1),new h(function(){var t,e=0;return new l(function(){t=n-o},function(){return e++<r?this.yieldReturn(t+=o):this.yieldBreak()},s.Blank)})},h.rangeDown=function(n,r,o){return null==o&&(o=1),new h(function(){var t,e=0;return new l(function(){t=n+o},function(){return e++<r?this.yieldReturn(t-=o):this.yieldBreak()},s.Blank)})},h.rangeTo=function(t,n,r){return null==r&&(r=1),new h(t<n?function(){var e;return new l(function(){e=t-r},function(){var t=e+=r;return t<=n?this.yieldReturn(t):this.yieldBreak()},s.Blank)}:function(){var e;return new l(function(){e=t+r},function(){var t=e-=r;return n<=t?this.yieldReturn(t):this.yieldBreak()},s.Blank)})},h.repeat=function(t,e){return null!=e?h.repeat(t).take(e):new h(function(){return new l(s.Blank,function(){return this.yieldReturn(t)},s.Blank)})},h.repeatWithFinalize=function(e,n){return e=y.createLambda(e),n=y.createLambda(n),new h(function(){var t;return new l(function(){t=e()},function(){return this.yieldReturn(t)},function(){null!=t&&(n(t),t=null)})})},h.generate=function(t,e){return null!=e?h.generate(t).take(e):(t=y.createLambda(t),new h(function(){return new l(s.Blank,function(){return this.yieldReturn(t())},s.Blank)}))},h.toInfinity=function(e,n){return null==e&&(e=0),null==n&&(n=1),new h(function(){var t;return new l(function(){t=e-n},function(){return this.yieldReturn(t+=n)},s.Blank)})},h.toNegativeInfinity=function(e,n){return null==e&&(e=0),null==n&&(n=1),new h(function(){var t;return new l(function(){t=e+n},function(){return this.yieldReturn(t-=n)},s.Blank)})},h.unfold=function(n,r){return r=y.createLambda(r),new h(function(){var t,e=!0;return new l(s.Blank,function(){return e?(e=!1,t=n):t=r(t),this.yieldReturn(t)},s.Blank)})},h.defer=function(e){return new h(function(){var t;return new l(function(){t=h.from(e()).getEnumerator()},function(){return t.moveNext()?this.yieldReturn(t.current()):this.yieldBreak()},function(){y.dispose(t)})})},h.prototype.traverseBreadthFirst=function(o,u){var t=this;return o=y.createLambda(o),u=y.createLambda(u),new h(function(){var e,n=0,r=[];return new l(function(){e=t.getEnumerator()},function(){for(;;){if(e.moveNext())return r.push(e.current()),this.yieldReturn(u(e.current(),n));var t=h.from(r).selectMany(function(t){return o(t)});if(!t.any())return!1;n++,r=[],y.dispose(e),e=t.getEnumerator()}},function(){y.dispose(e)})})},h.prototype.traverseDepthFirst=function(r,o){var t=this;return r=y.createLambda(r),o=y.createLambda(o),new h(function(){var e,n=[];return new l(function(){e=t.getEnumerator()},function(){for(;;){var t;if(e.moveNext())return t=o(e.current(),n.length),n.push(e),e=h.from(r(e.current())).getEnumerator(),this.yieldReturn(t);if(n.length<=0)return!1;y.dispose(e),e=n.pop()}},function(){try{y.dispose(e)}finally{h.from(n).forEach(function(t){t.dispose()})}})})},h.prototype.flatten=function(){var n=this;return new h(function(){var t,e=null;return new l(function(){t=n.getEnumerator()},function(){for(;;){if(null!=e){if(e.moveNext())return this.yieldReturn(e.current());e=null}if(t.moveNext()){if(t.current()instanceof Array){y.dispose(e),e=h.from(t.current()).selectMany(s.Identity).flatten().getEnumerator();continue}return this.yieldReturn(t.current())}return!1}},function(){try{y.dispose(t)}finally{y.dispose(e)}})})},h.prototype.pairwise=function(n){var t=this;return n=y.createLambda(n),new h(function(){var e;return new l(function(){(e=t.getEnumerator()).moveNext()},function(){var t=e.current();return!!e.moveNext()&&this.yieldReturn(n(t,e.current()))},function(){y.dispose(e)})})},h.prototype.scan=function(r,o){var u=null==o?(o=y.createLambda(r),!1):(o=y.createLambda(o),!0),i=this;return new h(function(){var t,e,n=!0;return new l(function(){t=i.getEnumerator()},function(){if(n){if(n=!1,u)return this.yieldReturn(e=r);if(t.moveNext())return this.yieldReturn(e=t.current())}return!!t.moveNext()&&this.yieldReturn(e=o(e,t.current()))},function(){y.dispose(t)})})},h.prototype.select=function(n){var r;return(n=y.createLambda(n)).length<=1?new g(this,null,n):(r=this,new h(function(){var t,e=0;return new l(function(){t=r.getEnumerator()},function(){return!!t.moveNext()&&this.yieldReturn(n(t.current(),e++))},function(){y.dispose(t)})}))},h.prototype.selectMany=function(o,u){var t=this;return o=y.createLambda(o),null==u&&(u=function(t,e){return e}),u=y.createLambda(u),new h(function(){var e,n=void 0,r=0;return new l(function(){e=t.getEnumerator()},function(){if(void 0!==n||e.moveNext())do{var t;if(null==n&&(t=o(e.current(),r++),n=h.from(t).getEnumerator()),n.moveNext())return this.yieldReturn(u(e.current(),n.current()))}while(y.dispose(n),n=null,e.moveNext());return!1},function(){try{y.dispose(e)}finally{y.dispose(n)}})})},h.prototype.where=function(n){var r;return(n=y.createLambda(n)).length<=1?new w(this,n):(r=this,new h(function(){var t,e=0;return new l(function(){t=r.getEnumerator()},function(){for(;t.moveNext();)if(n(t.current(),e++))return this.yieldReturn(t.current());return!1},function(){y.dispose(t)})}))},h.prototype.choose=function(r){r=y.createLambda(r);var t=this;return new h(function(){var e,n=0;return new l(function(){e=t.getEnumerator()},function(){for(;e.moveNext();){var t=r(e.current(),n++);if(null!=t)return this.yieldReturn(t)}return this.yieldBreak()},function(){y.dispose(e)})})},h.prototype.ofType=function(e){var n;switch(e){case Number:n=o;break;case String:n=i;break;case Boolean:n=t;break;case Function:n=p;break;default:n=null}return null===n?this.where(function(t){return t instanceof e}):this.where(function(t){return typeof t===n})},h.prototype.zip=function(){var r,o=arguments,u=y.createLambda(arguments[arguments.length-1]),i=this;return 2==arguments.length?(r=arguments[0],new h(function(){var t,e,n=0;return new l(function(){t=i.getEnumerator(),e=h.from(r).getEnumerator()},function(){return!(!t.moveNext()||!e.moveNext())&&this.yieldReturn(u(t.current(),e.current(),n++))},function(){try{y.dispose(t)}finally{y.dispose(e)}})})):new h(function(){var e,n=0;return new l(function(){var t=h.make(i).concat(h.from(o).takeExceptLast().select(h.from)).select(function(t){return t.getEnumerator()}).toArray();e=h.from(t)},function(){var t;return e.all(function(t){return t.moveNext()})?((t=e.select(function(t){return t.current()}).toArray()).push(n++),this.yieldReturn(u.apply(null,t))):this.yieldBreak()},function(){h.from(e).forEach(y.dispose)})})},h.prototype.merge=function(){var t=arguments,r=this;return new h(function(){var e,n=-1;return new l(function(){e=h.make(r).concat(h.from(t).select(h.from)).select(function(t){return t.getEnumerator()}).toArray()},function(){for(;0<e.length;){n=n>=e.length-1?0:n+1;var t=e[n];if(t.moveNext())return this.yieldReturn(t.current());t.dispose(),e.splice(n--,1)}return this.yieldBreak()},function(){h.from(e).forEach(y.dispose)})})},h.prototype.join=function(t,u,i,c,a){u=y.createLambda(u),i=y.createLambda(i),c=y.createLambda(c),a=y.createLambda(a);var f=this;return new h(function(){var e,n,r=null,o=0;return new l(function(){e=f.getEnumerator(),n=h.from(t).toLookup(i,s.Identity,a)},function(){for(;;){if(null!=r){var t=r[o++];if(void 0!==t)return this.yieldReturn(c(e.current(),t));o=0}if(!e.moveNext())return!1;t=u(e.current());r=n.get(t).toArray()}},function(){y.dispose(e)})})},h.prototype.groupJoin=function(t,r,o,u,i){r=y.createLambda(r),o=y.createLambda(o),u=y.createLambda(u),i=y.createLambda(i);var c=this;return new h(function(){var e=c.getEnumerator(),n=null;return new l(function(){e=c.getEnumerator(),n=h.from(t).toLookup(o,s.Identity,i)},function(){var t;return!!e.moveNext()&&(t=n.get(r(e.current())),this.yieldReturn(u(e.current(),t)))},function(){y.dispose(e)})})},h.prototype.all=function(e){e=y.createLambda(e);var n=!0;return this.forEach(function(t){if(!e(t))return n=!1}),n},h.prototype.any=function(t){t=y.createLambda(t);var e=this.getEnumerator();try{if(0==arguments.length)return e.moveNext();for(;e.moveNext();)if(t(e.current()))return!0;return!1}finally{y.dispose(e)}},h.prototype.isEmpty=function(){return!this.any()},h.prototype.concat=function(){var n,t,r=this;return 1==arguments.length?(n=arguments[0],new h(function(){var t,e;return new l(function(){t=r.getEnumerator()},function(){if(null==e){if(t.moveNext())return this.yieldReturn(t.current());e=h.from(n).getEnumerator()}return!!e.moveNext()&&this.yieldReturn(e.current())},function(){try{y.dispose(t)}finally{y.dispose(e)}})})):(t=arguments,new h(function(){var e;return new l(function(){e=h.make(r).concat(h.from(t).select(h.from)).select(function(t){return t.getEnumerator()}).toArray()},function(){for(;0<e.length;){var t=e[0];if(t.moveNext())return this.yieldReturn(t.current());t.dispose(),e.splice(0,1)}return this.yieldBreak()},function(){h.from(e).forEach(y.dispose)})}))},h.prototype.insert=function(o,u){var i=this;return new h(function(){var t,e,n=0,r=!1;return new l(function(){t=i.getEnumerator(),e=h.from(u).getEnumerator()},function(){return n==o&&e.moveNext()?(r=!0,this.yieldReturn(e.current())):t.moveNext()?(n++,this.yieldReturn(t.current())):!(r||!e.moveNext())&&this.yieldReturn(e.current())},function(){try{y.dispose(t)}finally{y.dispose(e)}})})},h.prototype.alternate=function(t){var u=this;return new h(function(){var e,n,r,o;return new l(function(){r=t instanceof Array||null!=t.getEnumerator?h.from(h.from(t).toArray()):h.make(t),(n=u.getEnumerator()).moveNext()&&(e=n.current())},function(){for(;;){if(null!=o){if(o.moveNext())return this.yieldReturn(o.current());o=null}var t;if(null!=e||!n.moveNext())return null!=e?(t=e,e=null,this.yieldReturn(t)):this.yieldBreak();e=n.current(),o=r.getEnumerator()}},function(){try{y.dispose(n)}finally{y.dispose(o)}})})},h.prototype.contains=function(t,e){e=y.createLambda(e);var n=this.getEnumerator();try{for(;n.moveNext();)if(e(n.current())===t)return!0;return!1}finally{y.dispose(n)}},h.prototype.defaultIfEmpty=function(n){var r=this;return void 0===n&&(n=null),new h(function(){var t,e=!0;return new l(function(){t=r.getEnumerator()},function(){return t.moveNext()?(e=!1,this.yieldReturn(t.current())):!!e&&(e=!1,this.yieldReturn(n))},function(){y.dispose(t)})})},h.prototype.distinct=function(t){return this.except(h.empty(),t)},h.prototype.distinctUntilChanged=function(o){o=y.createLambda(o);var t=this;return new h(function(){var e,n,r;return new l(function(){e=t.getEnumerator()},function(){for(;e.moveNext();){var t=o(e.current());if(r)return r=!1,n=t,this.yieldReturn(e.current());if(n!==t)return n=t,this.yieldReturn(e.current())}return this.yieldBreak()},function(){y.dispose(e)})})},h.prototype.except=function(t,r){r=y.createLambda(r);var o=this;return new h(function(){var e,n;return new l(function(){e=o.getEnumerator(),n=new E(r),h.from(t).forEach(function(t){n.add(t)})},function(){for(;e.moveNext();){var t=e.current();if(!n.contains(t))return n.add(t),this.yieldReturn(t)}return!1},function(){y.dispose(e)})})},h.prototype.intersect=function(t,o){o=y.createLambda(o);var u=this;return new h(function(){var e,n,r;return new l(function(){e=u.getEnumerator(),n=new E(o),h.from(t).forEach(function(t){n.add(t)}),r=new E(o)},function(){for(;e.moveNext();){var t=e.current();if(!r.contains(t)&&n.contains(t))return r.add(t),this.yieldReturn(t)}return!1},function(){y.dispose(e)})})},h.prototype.sequenceEqual=function(t,e){e=y.createLambda(e);var n=this.getEnumerator();try{var r=h.from(t).getEnumerator();try{for(;n.moveNext();)if(!r.moveNext()||e(n.current())!==e(r.current()))return!1;return r.moveNext()?!1:!0}finally{y.dispose(r)}}finally{y.dispose(n)}},h.prototype.union=function(o,t){t=y.createLambda(t);var u=this;return new h(function(){var e,n,r;return new l(function(){e=u.getEnumerator(),r=new E(t)},function(){var t;if(void 0===n){for(;e.moveNext();)if(t=e.current(),!r.contains(t))return r.add(t),this.yieldReturn(t);n=h.from(o).getEnumerator()}for(;n.moveNext();)if(t=n.current(),!r.contains(t))return r.add(t),this.yieldReturn(t);return!1},function(){try{y.dispose(e)}finally{y.dispose(n)}})})},h.prototype.orderBy=function(t){return new n(this,t,!1)},h.prototype.orderByDescending=function(t){return new n(this,t,!0)},h.prototype.reverse=function(){var n=this;return new h(function(){var t,e;return new l(function(){t=n.toArray(),e=t.length},function(){return 0<e&&this.yieldReturn(t[--e])},s.Blank)})},h.prototype.shuffle=function(){var t=this;return new h(function(){var e;return new l(function(){e=t.toArray()},function(){var t;return 0<e.length&&(t=Math.floor(Math.random()*e.length),this.yieldReturn(e.splice(t,1)[0]))},s.Blank)})},h.prototype.weightedSample=function(n){n=y.createLambda(n);var t=this;return new h(function(){var o,u=0;return new l(function(){o=t.choose(function(t){var e=n(t);return e<=0?null:{value:t,bound:u+=e}}).toArray()},function(){if(0<o.length){for(var t=Math.floor(Math.random()*u)+1,e=-1,n=o.length;1<n-e;){var r=Math.floor((e+n)/2);o[r].bound>=t?n=r:e=r}return this.yieldReturn(o[n].value)}return this.yieldBreak()},s.Blank)})},h.prototype.groupBy=function(e,n,r,o){var u=this;return e=y.createLambda(e),n=y.createLambda(n),null!=r&&(r=y.createLambda(r)),o=y.createLambda(o),new h(function(){var t;return new l(function(){t=u.toLookup(e,n,o).toEnumerable().getEnumerator()},function(){return!!t.moveNext()&&(null==r?this.yieldReturn(t.current()):this.yieldReturn(r(t.current().key(),t.current())))},function(){y.dispose(t)})})},h.prototype.partitionBy=function(i,c,a,f){var s,t=this;return i=y.createLambda(i),c=y.createLambda(c),f=y.createLambda(f),a=null==a?(s=!1,function(t,e){return new k(t,e)}):(s=!0,y.createLambda(a)),new h(function(){var n,r,o,u=[];return new l(function(){(n=t.getEnumerator()).moveNext()&&(r=i(n.current()),o=f(r),u.push(c(n.current())))},function(){for(var t,e;1==(t=n.moveNext())&&o===f(i(n.current()));)u.push(c(n.current()));return 0<u.length&&(e=a(r,s?h.from(u):u),u=t?(r=i(n.current()),o=f(r),[c(n.current())]):[],this.yieldReturn(e))},function(){y.dispose(n)})})},h.prototype.buffer=function(r){var t=this;return new h(function(){var n;return new l(function(){n=t.getEnumerator()},function(){for(var t=[],e=0;n.moveNext();)if(t.push(n.current()),++e>=r)return this.yieldReturn(t);return 0<t.length&&this.yieldReturn(t)},function(){y.dispose(n)})})},h.prototype.aggregate=function(t,e,n){return(n=y.createLambda(n))(this.scan(t,e,n).last())},h.prototype.average=function(e){e=y.createLambda(e);var n=0,r=0;return this.forEach(function(t){n+=e(t),++r}),n/r},h.prototype.count=function(n){n=null==n?s.True:y.createLambda(n);var r=0;return this.forEach(function(t,e){n(t,e)&&++r}),r},h.prototype.max=function(t){return this.select(t=null==t?s.Identity:t).aggregate(function(t,e){return e<t?t:e})},h.prototype.min=function(t){return this.select(t=null==t?s.Identity:t).aggregate(function(t,e){return t<e?t:e})},h.prototype.maxBy=function(n){return n=y.createLambda(n),this.aggregate(function(t,e){return n(t)>n(e)?t:e})},h.prototype.minBy=function(n){return n=y.createLambda(n),this.aggregate(function(t,e){return n(t)<n(e)?t:e})},h.prototype.sum=function(t){return this.select(t=null==t?s.Identity:t).aggregate(0,function(t,e){return t+e})},h.prototype.elementAt=function(n){var r,o=!1;if(this.forEach(function(t,e){if(e==n)return r=t,!(o=!0)}),o)return r;throw new Error("index is less than 0 or greater than or equal to the number of elements in source.")},h.prototype.elementAtOrDefault=function(n,t){void 0===t&&(t=null);var r,o=!1;return this.forEach(function(t,e){if(e==n)return r=t,!(o=!0)}),o?r:t},h.prototype.first=function(t){if(null!=t)return this.where(t).first();var e,n=!1;if(this.forEach(function(t){return e=t,!(n=!0)}),n)return e;throw new Error("first:No element satisfies the condition.")},h.prototype.firstOrDefault=function(t,e){var n,r;return void 0===e&&(e=null),null!=t?this.where(t).firstOrDefault(null,e):(r=!1,this.forEach(function(t){return n=t,!(r=!0)}),r?n:e)},h.prototype.last=function(t){if(null!=t)return this.where(t).last();var e,n=!1;if(this.forEach(function(t){n=!0,e=t}),n)return e;throw new Error("last:No element satisfies the condition.")},h.prototype.lastOrDefault=function(t,e){var n,r;return void 0===e&&(e=null),null!=t?this.where(t).lastOrDefault(null,e):(r=!1,this.forEach(function(t){r=!0,n=t}),r?n:e)},h.prototype.single=function(t){if(null!=t)return this.where(t).single();var e,n=!1;if(this.forEach(function(t){if(n)throw new Error("single:sequence contains more than one element.");n=!0,e=t}),n)return e;throw new Error("single:No element satisfies the condition.")},h.prototype.singleOrDefault=function(t,e){var n,r;return void 0===e&&(e=null),null!=t?this.where(t).singleOrDefault(null,e):(r=!1,this.forEach(function(t){if(r)throw new Error("single:sequence contains more than one element.");r=!0,n=t}),r?n:e)},h.prototype.skip=function(n){var r=this;return new h(function(){var t,e=0;return new l(function(){for(t=r.getEnumerator();e++<n&&t.moveNext(););},function(){return!!t.moveNext()&&this.yieldReturn(t.current())},function(){y.dispose(t)})})},h.prototype.skipWhile=function(r){r=y.createLambda(r);var o=this;return new h(function(){var t,e=0,n=!1;return new l(function(){t=o.getEnumerator()},function(){for(;!n;){if(!t.moveNext())return!1;if(!r(t.current(),e++))return n=!0,this.yieldReturn(t.current())}return!!t.moveNext()&&this.yieldReturn(t.current())},function(){y.dispose(t)})})},h.prototype.take=function(n){var r=this;return new h(function(){var t,e=0;return new l(function(){t=r.getEnumerator()},function(){return!!(e++<n&&t.moveNext())&&this.yieldReturn(t.current())},function(){y.dispose(t)})})},h.prototype.takeWhile=function(n){n=y.createLambda(n);var r=this;return new h(function(){var t,e=0;return new l(function(){t=r.getEnumerator()},function(){return!(!t.moveNext()||!n(t.current(),e++))&&this.yieldReturn(t.current())},function(){y.dispose(t)})})},h.prototype.takeExceptLast=function(n){null==n&&(n=1);var r=this;return new h(function(){var t,e;return n<=0?r.getEnumerator():(e=[],new l(function(){t=r.getEnumerator()},function(){for(;t.moveNext();){if(e.length==n)return e.push(t.current()),this.yieldReturn(e.shift());e.push(t.current())}return!1},function(){y.dispose(t)}))})},h.prototype.takeFromLast=function(r){var o;return r<=0||null==r?h.empty():(o=this,new h(function(){var t,e,n=[];return new l(function(){t=o.getEnumerator()},function(){for(;t.moveNext();)n.length==r&&n.shift(),n.push(t.current());return!!(e=null==e?h.from(n).getEnumerator():e).moveNext()&&this.yieldReturn(e.current())},function(){y.dispose(e)})}))},h.prototype.indexOf=function(n){var r=null;return typeof n===p?this.forEach(function(t,e){if(n(t,e))return r=e,!1}):this.forEach(function(t,e){if(t===n)return r=e,!1}),null!==r?r:-1},h.prototype.lastIndexOf=function(n){var r=-1;return typeof n===p?this.forEach(function(t,e){n(t,e)&&(r=e)}):this.forEach(function(t,e){t===n&&(r=e)}),r},h.prototype.asEnumerable=function(){return h.from(this)},h.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},h.prototype.toLookup=function(r,o,t){r=y.createLambda(r),o=y.createLambda(o),t=y.createLambda(t);var u=new E(t);return this.forEach(function(t){var e=r(t),t=o(t),n=u.get(e);void 0!==n?n.push(t):u.add(e,[t])}),new b(u)},h.prototype.toObject=function(e,n){e=y.createLambda(e),n=y.createLambda(n);var r={};return this.forEach(function(t){r[e(t)]=n(t)}),r},h.prototype.toDictionary=function(e,n,t){e=y.createLambda(e),n=y.createLambda(n),t=y.createLambda(t);var r=new E(t);return this.forEach(function(t){r.add(e(t),n(t))}),r},h.prototype.toJSONString=function(t,e){if(typeof JSON===r||null==JSON.stringify)throw new Error("toJSONString can't find JSON.stringify. This works native JSON support Browser or include json2.js");return JSON.stringify(this.toArray(),t,e)},h.prototype.toJoinedString=function(t,e){return null==t&&(t=""),this.select(e=null==e?s.Identity:e).toArray().join(t)},h.prototype.doAction=function(n){var r=this;return n=y.createLambda(n),new h(function(){var t,e=0;return new l(function(){t=r.getEnumerator()},function(){return!!t.moveNext()&&(n(t.current(),e++),this.yieldReturn(t.current()))},function(){y.dispose(t)})})},h.prototype.forEach=function(t){t=y.createLambda(t);var e=0,n=this.getEnumerator();try{for(;n.moveNext()&&!1!==t(n.current(),e++););}finally{y.dispose(n)}},h.prototype.write=function(e,n){null==e&&(e=""),n=y.createLambda(n);var r=!0;this.forEach(function(t){r?r=!1:document.write(e),document.write(n(t))})},h.prototype.writeLine=function(e){e=y.createLambda(e),this.forEach(function(t){document.writeln(e(t)+"<br />")})},h.prototype.force=function(){var t=this.getEnumerator();try{for(;t.moveNext(););}finally{y.dispose(t)}},h.prototype.letBind=function(e){e=y.createLambda(e);var n=this;return new h(function(){var t;return new l(function(){t=h.from(e(n)).getEnumerator()},function(){return!!t.moveNext()&&this.yieldReturn(t.current())},function(){y.dispose(t)})})},h.prototype.share=function(){var t,e=this,n=!1;return new m(function(){return new l(function(){null==t&&(t=e.getEnumerator())},function(){if(n)throw new Error("enumerator is disposed");return!!t.moveNext()&&this.yieldReturn(t.current())},s.Blank)},function(){n=!0,y.dispose(t)})},h.prototype.memoize=function(){var e,n,r=this,o=!1;return new m(function(){var t=-1;return new l(function(){null==n&&(n=r.getEnumerator(),e=[])},function(){if(o)throw new Error("enumerator is disposed");return t++,e.length<=t?!!n.moveNext()&&this.yieldReturn(e[t]=n.current()):this.yieldReturn(e[t])},s.Blank)},function(){o=!0,y.dispose(n),e=null})},h.prototype.catchError=function(e){e=y.createLambda(e);var n=this;return new h(function(){var t;return new l(function(){t=n.getEnumerator()},function(){try{return!!t.moveNext()&&this.yieldReturn(t.current())}catch(t){return e(t),!1}},function(){y.dispose(t)})})},h.prototype.finallyAction=function(e){e=y.createLambda(e);var n=this;return new h(function(){var t;return new l(function(){t=n.getEnumerator()},function(){return!!t.moveNext()&&this.yieldReturn(t.current())},function(){try{y.dispose(t)}finally{e()}})})},h.prototype.log=function(e){return e=y.createLambda(e),this.doAction(function(t){typeof console!==r&&console.log(e(t))})},h.prototype.trace=function(e,n){return null==e&&(e="Trace"),n=y.createLambda(n),this.doAction(function(t){typeof console!==r&&console.log(e,n(t))})},function(t,e,n,r){this.source=t,this.keySelector=y.createLambda(e),this.descending=n,this.parent=r}),d=(n.prototype=new h,n.prototype.createOrderedEnumerable=function(t,e){return new n(this.source,t,e,this)},n.prototype.thenBy=function(t){return this.createOrderedEnumerable(t,!1)},n.prototype.thenByDescending=function(t){return this.createOrderedEnumerable(t,!0)},n.prototype.getEnumerator=function(){var r,o,t=this,e=0;return new l(function(){r=[],o=[],t.source.forEach(function(t,e){r.push(t),o.push(e)});var n=d.create(t,null);n.GenerateKeys(r),o.sort(function(t,e){return n.compare(t,e)})},function(){return e<o.length&&this.yieldReturn(r[o[e++]])},s.Blank)},function(t,e,n){this.keySelector=t,this.descending=e,this.child=n,this.keys=null}),m=(d.create=function(t,e){e=new d(t.keySelector,t.descending,e);return null!=t.parent?d.create(t.parent,e):e},d.prototype.GenerateKeys=function(t){for(var e=t.length,n=this.keySelector,r=new Array(e),o=0;o<e;o++)r[o]=n(t[o]);this.keys=r,null!=this.child&&this.child.GenerateKeys(t)},d.prototype.compare=function(t,e){var n=y.compare(this.keys[t],this.keys[e]);return 0==n?(null!=this.child?this.child:y).compare(t,e):this.descending?-n:n},function(t,e){this.dispose=e,h.call(this,t)}),v=(m.prototype=new h,function(t){this.getSource=function(){return t}}),w=(v.prototype=new h,v.prototype.any=function(t){return null==t?0<this.getSource().length:h.prototype.any.apply(this,arguments)},v.prototype.count=function(t){return null==t?this.getSource().length:h.prototype.count.apply(this,arguments)},v.prototype.elementAt=function(t){var e=this.getSource();return 0<=t&&t<e.length?e[t]:h.prototype.elementAt.apply(this,arguments)},v.prototype.elementAtOrDefault=function(t,e){void 0===e&&(e=null);var n=this.getSource();return 0<=t&&t<n.length?n[t]:e},v.prototype.first=function(t){var e=this.getSource();return null==t&&0<e.length?e[0]:h.prototype.first.apply(this,arguments)},v.prototype.firstOrDefault=function(t,e){return void 0===e&&(e=null),null!=t?h.prototype.firstOrDefault.apply(this,arguments):0<(t=this.getSource()).length?t[0]:e},v.prototype.last=function(t){var e=this.getSource();return null==t&&0<e.length?e[e.length-1]:h.prototype.last.apply(this,arguments)},v.prototype.lastOrDefault=function(t,e){return void 0===e&&(e=null),null!=t?h.prototype.lastOrDefault.apply(this,arguments):0<(t=this.getSource()).length?t[t.length-1]:e},v.prototype.skip=function(e){var n=this.getSource();return new h(function(){var t;return new l(function(){t=e<0?0:e},function(){return t<n.length&&this.yieldReturn(n[t++])},s.Blank)})},v.prototype.takeExceptLast=function(t){return null==t&&(t=1),this.take(this.getSource().length-t)},v.prototype.takeFromLast=function(t){return this.skip(this.getSource().length-t)},v.prototype.reverse=function(){var e=this.getSource();return new h(function(){var t;return new l(function(){t=e.length},function(){return 0<t&&this.yieldReturn(e[--t])},s.Blank)})},v.prototype.sequenceEqual=function(t,e){return(!(t instanceof v||t instanceof Array)||null!=e||h.from(t).count()==this.count())&&h.prototype.sequenceEqual.apply(this,arguments)},v.prototype.toJoinedString=function(t,e){var n=this.getSource();return null==e&&n instanceof Array?n.join(t=null==t?"":t):h.prototype.toJoinedString.apply(this,arguments)},v.prototype.getEnumerator=function(){var t=this.getSource(),e=-1;return{current:function(){return t[e]},moveNext:function(){return++e<t.length},dispose:s.Blank}},function(t,e){this.prevSource=t,this.prevPredicate=e}),g=(w.prototype=new h,w.prototype.where=function(e){var n;return(e=y.createLambda(e)).length<=1?(n=this.prevPredicate,new w(this.prevSource,function(t){return n(t)&&e(t)})):h.prototype.where.call(this,e)},w.prototype.select=function(t){return(t=y.createLambda(t)).length<=1?new g(this.prevSource,this.prevPredicate,t):h.prototype.select.call(this,t)},w.prototype.getEnumerator=function(){var t,e=this.prevPredicate,n=this.prevSource;return new l(function(){t=n.getEnumerator()},function(){for(;t.moveNext();)if(e(t.current()))return this.yieldReturn(t.current());return!1},function(){y.dispose(t)})},function(t,e,n){this.prevSource=t,this.prevPredicate=e,this.prevSelector=n}),E=(g.prototype=new h,g.prototype.where=function(t){return(t=y.createLambda(t)).length<=1?new w(this,t):h.prototype.where.call(this,t)},g.prototype.select=function(e){var n;return(e=y.createLambda(e)).length<=1?(n=this.prevSelector,new g(this.prevSource,this.prevPredicate,function(t){return e(n(t))})):h.prototype.select.call(this,e)},g.prototype.getEnumerator=function(){var t,e=this.prevPredicate,n=this.prevSelector,r=this.prevSource;return new l(function(){t=r.getEnumerator()},function(){for(;t.moveNext();)if(null==e||e(t.current()))return this.yieldReturn(n(t.current()));return!1},function(){y.dispose(t)})},function(){function c(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a(t){return null===t?"null":void 0===t?"undefined":typeof t.toString===p?t.toString():Object.prototype.toString.call(t)}function f(t,e){this.key=t,this.value=e,this.prev=null,this.next=null}function e(){this.first=null,this.last=null}function t(t){this.countField=0,this.entryList=new e,this.buckets={},this.compareSelector=null==t?s.Identity:t}e.prototype={addLast:function(t){null!=this.last?((this.last.next=t).prev=this.last,this.last=t):this.first=this.last=t},replace:function(t,e){null!=t.prev?(t.prev.next=e).prev=t.prev:this.first=e,null!=t.next?(t.next.prev=e).next=t.next:this.last=e},remove:function(t){null!=t.prev?t.prev.next=t.next:this.first=t.next,null!=t.next?t.next.prev=t.prev:this.last=t.prev}};return t.prototype={add:function(t,e){var n=this.compareSelector(t),r=a(n),o=new f(t,e);if(c(this.buckets,r)){for(var u=this.buckets[r],i=0;i<u.length;i++)if(this.compareSelector(u[i].key)===n)return this.entryList.replace(u[i],o),void(u[i]=o);u.push(o)}else this.buckets[r]=[o];this.countField++,this.entryList.addLast(o)},get:function(t){var e=this.compareSelector(t),t=a(e);if(c(this.buckets,t))for(var n=this.buckets[t],r=0;r<n.length;r++){var o=n[r];if(this.compareSelector(o.key)===e)return o.value}},set:function(t,e){var n=this.compareSelector(t),r=a(n);if(c(this.buckets,r))for(var o,u=this.buckets[r],i=0;i<u.length;i++)if(this.compareSelector(u[i].key)===n)return o=new f(t,e),this.entryList.replace(u[i],o),u[i]=o,!0;return!1},contains:function(t){var e=this.compareSelector(t),t=a(e);if(c(this.buckets,t))for(var n=this.buckets[t],r=0;r<n.length;r++)if(this.compareSelector(n[r].key)===e)return!0;return!1},clear:function(){this.countField=0,this.buckets={},this.entryList=new e},remove:function(t){var e=this.compareSelector(t),n=a(e);if(c(this.buckets,n))for(var r=this.buckets[n],o=0;o<r.length;o++)if(this.compareSelector(r[o].key)===e)return this.entryList.remove(r[o]),r.splice(o,1),0==r.length&&delete this.buckets[n],void this.countField--},count:function(){return this.countField},toEnumerable:function(){var t=this;return new h(function(){var e;return new l(function(){e=t.entryList.first},function(){var t;return null!=e&&(t={key:e.key,value:e.value},e=e.next,this.yieldReturn(t))},s.Blank)})}},t}()),b=function(e){this.count=function(){return e.count()},this.get=function(t){return h.from(e.get(t))},this.contains=function(t){return e.contains(t)},this.toEnumerable=function(){return e.toEnumerable().select(function(t){return new k(t.key,t.value)})}},k=function(t,e){this.key=function(){return t},v.call(this,e)};return k.prototype=new v,{Enumerable:h}});
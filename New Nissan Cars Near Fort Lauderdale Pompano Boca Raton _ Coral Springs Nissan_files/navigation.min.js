"use strict";var Navigation=function(){function i(){var a=this;this._scrollHeight=0,this._megaMenuContainerDistanceFromViewportTop=0,this._startX=0,this._startY=0,this._menuShouldOpenOnHover=!0,this._navHasMegaMenu=!1,this._submenus=[],this._openMenu=null,this._headerScrolls=!1,this._initializeSticky=function(){a._nav.setAttribute("data-sticky-offset",""+a._header.offsetHeight)},this._handleScroll=function(){var e=a._nav.getAttribute("data-sticky-offset");"string"==typeof e&&(e=parseInt(e)),window.innerWidth<=991&&(window.pageYOffset>e?a._enableSticky():a._disableSticky())},this._handleResize=function(){a._initializeSticky(),992<=window.innerWidth||0===window.pageYOffset?a._disableSticky():a._enableSticky()},this._enableSticky=function(){a._headerWrapper.style.marginBottom=a._navHeader.offsetHeight+"px",a._body.classList.add("sticky-is-enabled")},this._disableSticky=function(){a._headerWrapper.style.marginBottom="0",a._body.classList.remove("sticky-is-enabled")},this._enableHover=function(){a._hoverItems.forEach(function(e){e=e.querySelector("a.navlink");e&&(e.addEventListener("mouseover",a._hoverOpen),e.addEventListener("mouseout",a._hoverClose))})},this._disableHover=function(){a._hoverItems.forEach(function(e){var t=e.querySelector("a.navlink");t&&(t.removeEventListener("mouseover",a._hoverOpen),t.removeEventListener("mouseout",a._hoverClose),e.classList.remove("open"))})},this._enableMobile=function(){document.querySelectorAll(".navbar-nav .hideOnMobile").forEach(function(e){return e.remove()}),a._disableHover(),a._horizontalNav.setAttribute("aria-hidden","true"),i.removeChildrenFromTabOrder(a._horizontalNav)},this._enableDesktop=function(){document.querySelectorAll(".navbar-nav .hideOnDesktop").forEach(function(e){return e.remove()}),a._menuShouldOpenOnHover?a._enableHover():a._disableHover()},this._captureSwipe=function(e){e=e.changedTouches[0];a._startX=e.pageX,a._startY=e.pageY},this._evaluateSwipe=function(e){var t=e.changedTouches[0],n=t.pageX-a._startX,t=t.pageY-a._startY;n>=i.threshold&&Math.abs(t)<i.threshold/2&&(a._closeSidebar(),e.preventDefault())},this._openSidebar=function(){a._scrollHeight=window.pageYOffset,a._body.style.top=-a._scrollHeight+"px",a._body.setAttribute("data-scroll",""+a._scrollHeight),a._body.classList.add("sidebar-is-open"),a._wrapper.insertBefore(a._backdrop,a._wrapper.childNodes[0]),document.addEventListener("keydown",a._handleEsc),a._backdrop.classList.add("in"),a._backdrop.classList.remove("invisible"),i.reAddChildrenToTabOrder(a._verticalNav),a._verticalNav.removeAttribute("aria-hidden")},this._closeSidebar=function(){a._body.classList.remove("sidebar-is-open"),a._backdrop.classList.remove("in"),document.querySelectorAll("#vertical-navbar-collapse .navbar-nav .mega-menu-container").forEach(function(e){e.parentElement.children[0].classList.contains("active")||e.classList.remove("open")}),setTimeout(function(){a._backdrop.classList.add("invisible"),a._backdrop.remove()},250),window.scrollTo({top:a._scrollHeight}),a._verticalNav.setAttribute("aria-hidden","true"),i.removeChildrenFromTabOrder(a._verticalNav)},this._hoverOpen=function(e){null!==(e=e.currentTarget)&&void 0!==e&&e.parentElement.classList.add("open")},this._hoverClose=function(e){null!==(e=null===(e=e.currentTarget)||void 0===e?void 0:e.parentElement)&&void 0!==e&&e.classList.remove("open")},this._handleEsc=function(e){"Escape"===e.key&&a._closeSidebar()},this._handleMenuOpen=function(e){var t,n=null===(n=a._openMenu)||void 0===n?void 0:n._menu.parentElement.classList.contains("mega-menu-container__nav-list"),i=n&&(null===(i=a._openMenu)||void 0===i?void 0:i._megaMenuContainer.classList.contains("open")),o=!n&&(null===(o=a._openMenu)||void 0===o?void 0:o._menu.parentElement.classList.contains("open"));(i||o)&&null!==(t=a._openMenu)&&void 0!==t&&t.closeSubmenu(!0,!1),a._openMenu=e},this._initializeNavComponentVariables(),this._initializeSticky(),this._enableMenuForDeviceType(),this._initializeSubmenus(),this._navHasMegaMenu&&(this._initializeMegaMenuStyling(),this._headerScrolls?this._makeMegaMenuScrollWithHeader():this._makeMegaMenuFixedWithHeader()),this._addEventListeners()}return i.prototype._initializeNavComponentVariables=function(){this._body=document.body,this._wrapper=document.getElementById("content"),this._header=document.querySelector("header"),this._nav=document.getElementById("nav"),this._offCanvasNav=document.getElementById("nav-sidebar"),this._headerWrapper=document.querySelector(".headerWrapper"),this._navHeader=document.getElementById("navbar-header"),this._hoverItems=this._nav.querySelectorAll(".dropdown"),this._navToggle=document.getElementById("open-right"),this._horizontalNav=document.getElementById("horizontal-navbar-collapse"),this._verticalNav=document.getElementById("vertical-navbar-collapse"),this._collapseItems=this._nav.querySelectorAll(".dropdown-has-children"),this._sidebarCloseBtn=this._offCanvasNav.querySelector(".navbar-close-button"),this._menuShouldOpenOnHover="True"===this._nav.getAttribute("data-open-menu-on-hover"),this._megaMenuContainerDistanceFromViewportTop=this._headerWrapper.getBoundingClientRect().bottom,this._backdrop=document.createElement("div"),this._backdrop.id="navbar-backdrop",this._backdrop.className="fade invisible",this._navHasMegaMenu=this._nav.classList.contains("mega-menu-nav"),this._headerScrolls="fixed"!==getComputedStyle(this._headerWrapper).position},i.prototype._enableMenuForDeviceType=function(){window.matchMedia("(max-width: 991px)").matches?this._enableMobile():this._enableDesktop()},i.prototype._makeMegaMenuScrollWithHeader=function(){document.querySelectorAll(".full.mega-menu-nav .mega-menu-container--fixed").forEach(function(e){e.classList.remove("mega-menu-container--fixed")})},i.prototype._makeMegaMenuFixedWithHeader=function(){var t=this;document.querySelectorAll(".full.mega-menu-nav .mega-menu-container--fixed").forEach(function(e){e.style.top=t._megaMenuContainerDistanceFromViewportTop+"px"})},i.prototype._menuScrollingObserver=function(e){var n=this;new IntersectionObserver(function(e){var t;0===e[0].intersectionRatio&&null!==(t=n._openMenu)&&void 0!==t&&t.closeSubmenu(!1,!1)}).observe(e)},i.prototype._initializeSubmenus=function(){var i=this;this._collapseItems.forEach(function(e){var t,n=e.firstElementChild;n&&(t=n.dataset.menuName,t=document.querySelector('.mega-menu-container--desktop[data-menu-name="'+t+'"]'),i._menuScrollingObserver(e),i._submenus.push(new Submenu(n,i._menuShouldOpenOnHover,t,i._handleMenuOpen)))})},i.prototype._addEventListeners=function(){this._verticalNav.addEventListener("touchstart",this._captureSwipe,{passive:!0}),this._verticalNav.addEventListener("touchmove",this._evaluateSwipe,{passive:!0}),this._navToggle.addEventListener("click",this._openSidebar),this._backdrop.addEventListener("click",this._closeSidebar),this._backdrop.addEventListener("touchstart",this._captureSwipe,{passive:!0}),this._backdrop.addEventListener("touchmove",this._evaluateSwipe,{passive:!0}),this._sidebarCloseBtn.addEventListener("click",this._closeSidebar),this._sidebarCloseBtn.addEventListener("touchend",this._closeSidebar,{passive:!0}),window.addEventListener("scroll",this._handleScroll),window.addEventListener("resize",this._handleResize),window.jQuery(".nav-sidebar .dropdown-menu").on("show.bs.collapse",function(){var e,t=this.parentElement.parentElement;t.classList.contains("mega-menu-container")?(t.classList.toggle("open"),null!==(e=t.previousElementSibling)&&void 0!==e&&e.classList.add("active")):null!==(e=this.previousElementSibling)&&void 0!==e&&e.classList.add("active")}),window.jQuery(".nav-sidebar .dropdown-menu").on("hide.bs.collapse",function(){var e,t=this.parentElement.parentElement;t.classList.contains("mega-menu-container")?(t.classList.toggle("open"),null!==(e=t.previousElementSibling)&&void 0!==e&&e.classList.remove("active")):null!==(e=this.previousElementSibling)&&void 0!==e&&e.classList.remove("active")})},i.prototype._initializeMegaMenuStyling=function(){this._styleMegaMenuBackgroundColorVariable(),this._styleMegaMenuMaxHeight()},i.prototype._styleMegaMenuBackgroundColorVariable=function(){var t=null,e=document.querySelectorAll(".full.mega-menu-nav .dropdown-has-children"),n=Array.from(e).find(function(e){return null!==(t=e.querySelector(".dropdown-menu"))});n&&(n.classList.add("open"),t.style.height="0px",e=getComputedStyle(n.querySelector("a")).backgroundColor,document.documentElement.style.setProperty("--submenu-text-background-color",e),n.classList.remove("open"),t.style.height="unset")},i.prototype._styleMegaMenuMaxHeight=function(){var n="calc(98vh - "+this._megaMenuContainerDistanceFromViewportTop+"px)";document.querySelectorAll(".full.mega-menu-nav .mega-menu-container--desktop").forEach(function(e){e.style.maxHeight=n,e.style.opacity="0",e.classList.add("open");var t=e.querySelector(".mega-menu-container__content").children[1],t=getComputedStyle(t).height;e.style.height=t,e.classList.remove("open"),e.style.opacity="1"})},i.removeChildrenFromTabOrder=function(e){e.querySelectorAll("a button").forEach(function(e){return e.setAttribute("tabindex","-1")})},i.reAddChildrenToTabOrder=function(e){e.querySelectorAll("[tabindex='-1']").forEach(function(e){return e.removeAttribute("tabindex")})},i.toggleExpanded=function(e){"true"===e.getAttribute("aria-expanded")?e.setAttribute("aria-expanded","false"):e.setAttribute("aria-expanded","true")},i.threshold=50,i}(),Submenu=function(){function a(e,t,n,i){var o=this;this.handleMenuOpen=i,this._megaMenuContainer=null,this._activeIndex=0,this._firstLetters=[],this._isHovering=!1,this._openedByClick=!1,this._addEventListeners=function(){var e;o._trigger.addEventListener("click",o._handleTriggerClick),o._trigger.addEventListener("keydown",function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),o._trigger.click())}),o._menu.addEventListener("keydown",o._handleMenuNavigation),null!==(e=o._megaMenuLinkItems)&&void 0!==e&&e.forEach(function(t){t.addEventListener("keydown",function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.click())})}),o._menuShouldOpenOnHover&&o._addOpenOnHoverEventListeners(),o._submenuHasMegaMenu&&o._addMegaMenuCloseBtnListeners()},this._handleTriggerClick=function(e){o._isHovering||(o._openedByClick?o.closeSubmenu(!1,!0):(o._openedByClick=!0,o._openSubmenu(!0)))},this._handleHoverOver=function(){o._openedByClick||(o._isHovering=!0,o._openSubmenu(!1))},this._handleHoverOut=function(){o.closeSubmenu(!1)},this._openSubmenu=function(e){e||o._trigger.parentElement.classList.add("open"),o._trigger.setAttribute("aria-expanded","true"),e&&(o.handleMenuOpen(o),o._submenuHasMegaMenu&&o._openMegaMenu(),o._focusFirstItem()),document.addEventListener("keydown",o._handleEscape)},this.closeSubmenu=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!1),o._trigger.setAttribute("aria-expanded","false"),t||o._trigger.parentElement.classList.remove("open"),o._submenuHasMegaMenu&&o._closeMegaMenu(),o._isHovering=!1,o._openedByClick=!1,e&&o._trigger.focus(),document.removeEventListener("keydown",o._handleEscape)},this._handleEscape=function(e){"Escape"===e.key&&(e.preventDefault(),o.closeSubmenu())},this._handleMenuNavigation=function(e){if("Enter"!==e.key)if(" "!==e.key)if(1!==e.key.length){if(a.NavigationKeys.includes(e.key))switch(e.preventDefault(),e.stopImmediatePropagation(),e.key){case"Home":o._focusFirstItem();break;case"End":o._focusLastItem();break;case"ArrowLeft":case"ArrowUp":0===o._activeIndex?o._focusLastItem():o._focusPrevItem();break;case"ArrowRight":case"ArrowDown":o._activeIndex===o._menuItems.length-1?o._focusFirstItem(0):o._focusNextItem()}}else o._focusNextByFirstLetter(e.key.toLowerCase());else null!==(e=document.activeElement)&&void 0!==e&&e.click()},this._focusFirstItem=function(e){void 0===e&&(e=250),setTimeout(function(){o._menuItems[0].focus(),o._activeIndex=0},e)},this._focusLastItem=function(){var e=o._menuItems.length-1;o._menuItems[e].focus(),o._activeIndex=e},this._focusPrevItem=function(){var e=o._activeIndex-1;o._menuItems[e].focus(),o._activeIndex=e},this._focusNextItem=function(){var e=o._activeIndex+1;o._menuItems[e].focus(),o._activeIndex=e},this._focusNextByFirstLetter=function(e){var t=o._firstLetters.indexOf(e,o._activeIndex+1);-1<(t=-1===t?o._firstLetters.indexOf(e):t)&&(o._menuItems[t].focus(),o._activeIndex=t)};i=null;this._megaMenuContainer=n,this._trigger=e,this._menuShouldOpenOnHover=t,this._submenuHasMegaMenu?(i=n.querySelector(".dropdown-mega-menu"),this._megaMenuLinkItems=n.querySelectorAll("a"),this._addMegaMenuListeners()):i=e.parentElement.querySelector(".dropdown-menu"),i?(this._menu=i,this._menuItems=i.querySelectorAll("[role='menuitem']"),this._menuItems.forEach(function(e){o._firstLetters.push(e.textContent.trim().substring(0,1).toLowerCase())}),this._addEventListeners()):console.error("Menu button "+e.id+" is marked up as if it has a sub menu but does not.")}return Object.defineProperty(a.prototype,"_submenuHasMegaMenu",{get:function(){return null!==this._megaMenuContainer},enumerable:!1,configurable:!0}),a.prototype._addOpenOnHoverEventListeners=function(){this._trigger.addEventListener("mouseover",this._handleHoverOver),this._trigger.addEventListener("mouseout",this._handleHoverOut),this._menu.addEventListener("mouseover",this._handleHoverOver),this._menu.addEventListener("mouseout",this._handleHoverOut)},a.prototype._addMegaMenuCloseBtnListeners=function(){var t=this,e=this._megaMenuContainer.querySelector(".mega-menu-container__close");e.addEventListener("click",function(e){t.closeSubmenu()}),e.addEventListener("keydown",function(e){"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),t._focusLastItem())});new MutationObserver(function(){setTimeout(function(){t._trigger.parentElement.classList.contains("open")?t._openMegaMenu():t._closeMegaMenu()},100)}).observe(this._trigger.parentElement,{attributes:!0,childList:!0,subtree:!0})},a.prototype._addMegaMenuListeners=function(){var t=this;this._megaMenuContainer.addEventListener("keydown",function(e){e.target===t._megaMenuContainer&&"Tab"===e.key&&e.shiftKey&&t._trigger.parentElement.nextElementSibling.firstElementChild.focus()})},a.prototype._openMegaMenu=function(){this._megaMenuContainer.classList.add("open")},a.prototype._closeMegaMenu=function(){var e;null!==(e=this._megaMenuContainer)&&void 0!==e&&e.classList.remove("open")},a.NavigationKeys=["End","Home","ArrowLeft","ArrowUp","ArrowRight","ArrowDown"],a}();DoUtility.SelfInstantiateOnLoad(Navigation);